<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Malin Kundang</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap"
    rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          fontFamily: {
            mon: ['Montserrat']
          },
        }
      }
    }
  </script>
</head>

<body>

  <nav class="flex py-6 justify-around h-7 items-center bg-[#2f2f2f] mb-10">
    <div class="grow ml-3 flex items-center w-4">
      <a href="index.html" class=""><img src="assets/image.png" class="w-14" alt="logo"></a>
      <h1 class="text-white ml-3">Malin Kundang</h1>
    </div>
    <div class="grow flex">
      <h1 class="text-white">1/?</h1>
    </div>
  </nav>

  <div id="story">
    <img src="assets/covermalin.webp" alt="" class="w-64 block mx-auto mb-5">
    <p id="story-text" class="text-center border rounded-lg p-5 w-[80%] mx-auto">
      Sebelum ayah Malin Kundang berangkat menaiki kapal, tiba-tiba langit menjadi gelap menandakan akan terjadi badai besar, lalu ayah Malin Kundang menjadi bimbang untuk menaiki kapal.
    </p>
    <div class="mx-auto w-max mt-6">
      <button id="choiceA" class="bg-[#d9c6a6] p-3 rounded text-sm w-32">A: Sail through the storm</button>
      <button id="choiceB" class="bg-[#d9c6a6] p-3 rounded text-sm w-32">B: Turn back to the shore</button>
    </div>
  </div>

  <script>
    // Story text elements
    const storyText = document.getElementById("story-text");

    // Choice buttons
    const choiceA = document.getElementById("choiceA");
    const choiceB = document.getElementById("choiceB");

    // Initial Story Step
    function startStory(choice) {
      if (choice === 'A') {
        // User chose option A (Sail through the storm)
        storyText.textContent =
          "Since then, Malin's mother worked to support them both. Malin was a clever but sometimes mischievous boy. He liked chasing chickens, and once he fell and left a scar on his arm. When Malin grew up, he felt pity for his mother, who was old but still working. In the middle of his journey, Malin Kundangâ€™s ship was attacked by pirates. Malin had to choose whether to fight or hide.";
        
        choiceA.textContent = "A: Fight the pirates";
        choiceB.textContent = "B: Hide below deck";

        // Attach next choices
        choiceA.onclick = function () {
          nextStep('fight');
        };
        choiceB.onclick = function () {
          nextStep('hide');
        };

      } else if (choice === 'B') {
        // User chose option B (Turn back to the shore)
        storyText.textContent =
          "Malin Kundang's father returned home and postponed his journey to the distant land. Eventually, he set sail a year later under better weather.";
        endStory();
      }
    }

    // Next Step Based on Previous Choices
    function nextStep(choice) {
      if (choice === 'fight') {
        // User chose to fight pirates
        storyText.textContent =
          "While fighting the pirates, Malin Kundang was captured and imprisoned by them. In the end, Malin was thrown into the middle of the sea by the pirates, and he died.";
        endStory();
      } else if (choice === 'hide') {
        // User chose to hide
        storyText.textContent = "You hide below deck. The pirates raid the ship, but you survive. Eventually, they leave, and you continue your journey.";
        endStory();
      }
    }

    // Function to end the story and provide options to restart or find more stories
    function endStory() {
      choiceA.textContent = "Back to beginning";
      choiceB.textContent = "Find more story";
      
      choiceA.onclick = function () {
        location.reload(); // Reload the page to start again
      };
      choiceB.onclick = function () {
        storyText.textContent = "More stories will be available soon!";
        choiceA.style.display = "none";
        choiceB.style.display = "none";
      };
    }

    // Attach event listeners for the first decision
    choiceA.addEventListener("click", function () {
      startStory('A');
    });
    choiceB.addEventListener("click", function () {
      startStory('B');
    });
  </script>

</body>

</html>
