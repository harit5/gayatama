<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Malin Kundang</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap"
    rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          fontFamily: {
            mon: ['Montserrat']
          },
        }
      }
    }
  </script>
</head>

<body>
  <nav class="flex py-6 justify-around h-7 items-center bg-[#2f2f2f] mb-10">
    <div class="grow ml-3 flex items-center w-4">
      <a href="index.html" class=""><img src="assets/image.png" class="w-14" alt="logo"></a>
      <h1 class="text-white ml-3">Malin Kundang</h1>
    </div>
    <div class="grow flex">
      <h1 class="text-white">1/?</h1>
    </div>
  </nav>

  <div id="story">
    <img src="assets/covermalin.webp" alt="" class="w-64 block mx-auto mb-5">
    <p id="story-text" class="text-center border rounded-lg p-5 w-[80%] mx-auto">
      Sebelum ayah Malin Kundang berangkat menaiki kapal, tiba-tiba langit menjadi gelap menandakan akan terjadi badai
      besar, lalu ayah Malin Kundang menjadi bimbang untuk menaiki kapal.
    </p>
    <div class="mx-auto w-max mt-6">
      <button id="choiceA" class="bg-[#d9c6a6] p-3 rounded text-sm w-32">Sail through the storm</button>
      <button id="choiceB" class="bg-[#d9c6a6] p-3 rounded text-sm w-32">Turn back to the shore</button>
    </div>
  </div>

  <footer class="p-2 sm:p-3 flex justify-between bg-[#d39747] mt-6">
    <img src="assets/WIIF_LOGO-removebg-preview.png" alt="" class="w-14 sm:w-20">
    <ul class="flex w-52 justify-around text-lg items-center">
      <li class="hover:text-slate-600 transition-colors text-sm sm:text-lg"><a href="about.html">About</a></li>
      <li class="hover:text-slate-600 transition-colors text-sm sm:text-lg"><a href="help.html">Help</a></li>
    </ul>
  </footer>

  <script>
    const storyText = document.getElementById("story-text");
    const choiceA = document.getElementById("choiceA");
    const choiceB = document.getElementById("choiceB");

    let currentStage = 1;

    // Event listener for choice A
    choiceA.addEventListener("click", function () {
      if (currentStage === 1) {
        storyText.textContent =
          "Since then, Malin's mother worked to support them both. Malin was a clever but sometimes mischievous boy. He liked chasing chickens, and once he fell and left a scar on his arm. When Malin grew up, he felt pity for his mother, who was old but still working. In the middle of his journey, Malin Kundangâ€™s ship was attacked by pirates. Malin had to choose whether to fight or hide.";
        choiceA.textContent = "Fight the pirates";
        choiceB.textContent = "Hide below deck";
        currentStage = 2;
      } else if (currentStage === 2) {
        storyText.textContent =
          "While fighting the pirates, Malin Kundang was captured and imprisoned by them. In the end, Malin was thrown into the middle of the sea by the pirates, and he died.";
        endStory();
      } else if (currentStage === 3) {
        storyText.textContent =
          "Next, Malin settled in the village and worked diligently and tirelessly. After several years in the foreign land, Malin became very wealthy and had married a woman. The news of Malin Kundang's wealth and marriage eventually reached his mother. Malin Kundang's mother felt grateful that her son had succeeded. One day, Malin and his wife sailed to his village on a large and beautiful ship, accompanied by his crew and bodyguards. When Malin disembarked from the ship, his mother stood nearby and was certain it was her son because she recognized the scar on his arm. She immediately embraced Malin, as it had been a long time since they had seen each other. However, when Malin met his mother...";
        choiceA.textContent = "Malin pushes his mother";
        choiceB.textContent = "Malin hugs his mother tightly";
        currentStage = 4;
      } else if (currentStage === 4) {
        storyText.textContent = "Malin pushes his mother away. She is heartbroken, and a curse falls upon him.";
        endStory();
      }
    });

    // Event listener for choice B
    choiceB.addEventListener("click", function () {
      if (currentStage === 1) {
        storyText.textContent =
          "Malin Kundang's father returned home and postponed his departure to a foreign land until the weather improved. Malin Kundang's father went to a foreign land a year ago and returned happily.";
        endStory();
      } else if (currentStage === 2) {
        storyText.textContent =
          "Malin Kundang was stranded in the middle of the sea, until eventually, the ship he was on was washed ashore on a beach. With the remaining strength he had, Malin Kundang walked towards the nearest village from the beach.While on that foreign island, Malin was offered a job by the local residents there, but Malin thought about returning to his mother because he was worried about encountering pirates on the island.";
        choiceA.textContent = "Accept the job";
        choiceB.textContent = "Reject the job";
        currentStage = 3;
      } else if (currentStage === 3) {
        storyText.textContent = "Malin rejects the job and continues his journey.";
        endStory();
      } else if (currentStage === 4) {
        storyText.textContent = "Malin hugs his mother, and they are reunited.";
        endStory();
      }
    });

    // End of story actions
    function endStory() {
      choiceA.textContent = "Back to beginning";
      choiceB.textContent = "Back To Home";
      choiceA.onclick = function () {
        location.reload(); // Reload the page to start again
      };
      choiceB.onclick = function () {
        window.location.href = 'index.html'; // Navigate to home
      };
    }
  </script>

</body>

</html>
